<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"> -->
    <link rel="stylesheet" th:href="@{/css/bootstrap.css}" />
    <link rel="stylesheet" th:href="@{/css/buttons.dataTables.min.css}" />
    <link rel="stylesheet" th:href="@{/css/jquery.dataTables.min.css}" />

    <script th:src="@{/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/js/jquery-3.7.0.js}"></script>
    <script th:src="@{/js/bootstrap.js}"></script>
    <script th:src="@{/js/dataTables.buttons.min.js}"></script>
    <script th:src="@{/js/jquery.dataTables.min.js}"></script>

    <title>Gestion UE</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }

      th,
      td {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
      }

      th {
        background-color: #4caf50;
        color: white;
      }

      tr:nth-child(even) {
        background-color: #f2f2f2;
      }

      a {
        text-decoration: none;
        color: #007bff;
        margin-right: 10px;
      }
      .table-row {
        cursor: pointer;
      }

      .selected {
        background-color: #a0d8ff; /* Couleur de fond pour la sélection */
      }
      .hi {
        visibility: hidden;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-dark bg-dark">
      <!-- Navbar content -->
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Gestion DAOS</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarScroll"
          aria-controls="navbarScroll"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarScroll">
          <ul
            class="navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll"
            style="--bs-scroll-height: 100px"
          >
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="navbarScrollingDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Link
              </a>
              <ul
                class="dropdown-menu"
                aria-labelledby="navbarScrollingDropdown"
              >
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li>
                  <hr class="dropdown-divider" />
                </li>
                <li>
                  <a class="dropdown-item" href="#">Something else here</a>
                </li>
              </ul>
            </li>
            <li class="nav-item">
              <a
                class="nav-link disabled"
                href="#"
                tabindex="-1"
                aria-disabled="true"
                >Link</a
              >
            </li>
          </ul>
          <form class="d-flex">
            <input
              class="form-control me-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
            <button class="btn btn-outline-success" type="submit">
              Search
            </button>
          </form>
        </div>
      </div>
    </nav>
    <div class="text-center">
      <!-- <h3>Liste des EC : <span th:text="${ue.code}"> </span>  <span th:text="${ue.libelle}"></span></h3> -->
      <button
        type="button"
        class="btn btn-success"
        data-bs-toggle="modal"
        data-bs-target="#myModal"
      >
        Ajouter un nouveau Enseignement
      </button>
    </div>

    <table id="table_EC">
      <thead>
        <tr>
          <th style="display: none">Id</th>
          
          <th>Libelle</th>
          <th>Description</th>
          <th>Objectifs</th>
          <th style="text-align: center; background-color: firebrick">
            Operation
          </th>
          <th>Detail</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="e:${listeDesEnseignement}" class="table-row">
          <td style="display: none" th:text="${e.id}"></td>
    
          <td th:text="${e.libelle}"></td>
          <td th:text="${e.description}"></td>
      <td>
            <span th:each="o:${e.objectifs}">
              <p th:text="${o}"></p>
            </span>
          </td>

          <td>
            <!-- <a th:href="@{/rechercher_id_modifier(id=${e.id})}"   class="btn btn-primary"> Modifier</a> -->
            <div class="text-center">
              <button
                type="button"
                class="btn btn-primary"
                data-bs-toggle="modal"
                data-bs-target="#myModal2"
              >
                Modifier
              </button>
              <a
                onclick="return confirm('Êtes-vous sûr de vouloir supprimer cet EC')"
                th:href="@{/supprimer_ec(id=${e.id},id2=${classe.id})}"
                class="btn btn-danger"
              >
                Supprimer</a
              >
            </div>
          </td>
       
          <td>
            <div class="text-center">
              <a th:href="@{/details_ue(id=${e.id})}" class="btn btn-outline-primary"> Details</a>
          </td>
          </div>
        </tr>
      </tbody>
    </table>

    <!-- The Modal -->
    <div class="modal" id="myModal2">
      <div class="modal-dialog modal-fullscreen-xl-down">
        <div class="modal-content">
          <!-- Modal Header -->
          <div class="modal-header text-center btn-primary">
            <h4 class="modal-title">Modifier EC</h4>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>

        
    <script>
      // Utilisation de jQuery pour simplifier l'ajout de gestionnaires d'événements
      $(document).ready(function () {
        // Ajout d'un gestionnaire de clic pour toutes les lignes avec la classe "table-row"
        $(".table-row").on("click", function () {
          // Supprimer la classe "selected" de toutes les lignes
          $(".table-row").removeClass("selected");
          // Ajouter la classe "selected" à la ligne cliquée
          $(this).addClass("selected");
          // Récupérer les données de la ligne sélectionnée
          var id = $(this).find("td:eq(0)").text();
          var code = $(this).find("td:eq(1)").text();
          var libelle = $(this).find("td:eq(2)").text();
          var cm = $(this).find("td:eq(3)").text();
          var td = $(this).find("td:eq(4)").text();
          var tp = $(this).find("td:eq(5)").text();
          var tpe = $(this).find("td:eq(7)").text();
          var coefficient = $(this).find("td:eq(9)").text();
          var description = $(this).find("td:eq(10)").text();
          document.getElementById("id").value = id;
          document.getElementById("code").value = code;
          document.getElementById("libelle").value = libelle;
          document.getElementById("cm").value = cm;
          document.getElementById("td").value = td;
          document.getElementById("tp").value = tp;
          document.getElementById("tpe").value = tpe;
          document.getElementById("description").value = description;
          document.getElementById("coefficient").value = coefficient;
        });

        $("#table_EC").DataTable({});
      });
    </script>
  </body>
</html>
